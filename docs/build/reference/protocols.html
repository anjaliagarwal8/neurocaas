
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Protocols &#8212; NeuroCAAS 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User Profiles" href="userprofiles.html" />
    <link rel="prev" title="&lt;no title&gt;" href="blueprints.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="protocols">
<h1>Protocols<a class="headerlink" href="#protocols" title="Permalink to this headline">¶</a></h1>
<p>Some text here first.</p>
<span class="target" id="module-ncap_iac.protocols.submit_start"></span><dl class="py class">
<dt id="ncap_iac.protocols.submit_start.Submission_Launch">
<em class="property">class </em><code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">Submission_Launch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_Launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_Launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Collection of data for a single request to process a dataset</p>
</dd></dl>

<dl class="py class">
<dt id="ncap_iac.protocols.submit_start.Submission_Launch_folder">
<em class="property">class </em><code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">Submission_Launch_folder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_Launch_folder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_Launch_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Generalization of Submission_Launch to a folder. Will launch a separate instance for each file in the bucket. Can be used to replace Submission_Launch whole-hog, as giving the path to the file will still work with this implementation.</p>
<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_Launch_folder.acquire_instance">
<code class="sig-name descname">acquire_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_Launch_folder.acquire_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_Launch_folder.acquire_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquires &amp; Starts New EC2 Instances Of The Requested Type &amp; AMI</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_Launch_folder.put_instance_monitor_rule">
<code class="sig-name descname">put_instance_monitor_rule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_Launch_folder.put_instance_monitor_rule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_Launch_folder.put_instance_monitor_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>For multiple datasets.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_Launch_folder.start_instance">
<code class="sig-name descname">start_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_Launch_folder.start_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_Launch_folder.start_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts new instances if stopped. We write a special loop for this one because we only need a single 60 second pause for all the intances, not one for each in serial</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ncap_iac.protocols.submit_start.Submission_Launch_log_dev">
<em class="property">class </em><code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">Submission_Launch_log_dev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_Launch_log_dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_Launch_log_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Latest modification (11/1) to submit framework: spawn individual log files for each dataset. .</p>
<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_Launch_log_dev.process_inputs">
<code class="sig-name descname">process_inputs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_Launch_log_dev.process_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_Launch_log_dev.process_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiates Processing On Previously Acquired EC2 Instance. This version requires that you include a config (fourth) argument</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ncap_iac.protocols.submit_start.Submission_deploy">
<em class="property">class </em><code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">Submission_deploy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_deploy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_deploy" title="Permalink to this definition">¶</a></dt>
<dd><p>Object for ncap upload handling where inputs can come from specific user buckets. We then need to partition and replicate output between the user input bucket and the submit bucket. Input and submit buckets are structured as follows:  
Input Bucket:
-inputs
+data
+configs
-results
-job folder
+results
+per-dataset logs
+per-job certificate</p>
<p>Submit Bucket: 
- group name
-inputs
+submit.json files referencing the input bucket. 
-results
+per-job certificate 
+internal ec2 logs.</p>
<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_deploy.acquire_instance">
<code class="sig-name descname">acquire_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_deploy.acquire_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_deploy.acquire_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquires &amp; Starts New EC2 Instances Of The Requested Type &amp; AMI</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_deploy.process_inputs">
<code class="sig-name descname">process_inputs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_deploy.process_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_deploy.process_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiates Processing On Previously Acquired EC2 Instance. This version requires that you include a config (fourth) argument</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_deploy.put_instance_monitor_rule">
<code class="sig-name descname">put_instance_monitor_rule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_deploy.put_instance_monitor_rule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_deploy.put_instance_monitor_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>For multiple datasets.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_deploy.start_instance">
<code class="sig-name descname">start_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_deploy.start_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_deploy.start_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts new instances if stopped. We write a special loop for this one because we only need a single 60 second pause for all the intances, not one for each in serial</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ncap_iac.protocols.submit_start.Submission_dev">
<em class="property">class </em><code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">Submission_dev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Specific lambda for purposes of development.</p>
<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.acquire_instances">
<code class="sig-name descname">acquire_instances</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.acquire_instances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.acquire_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Streamlines acquisition, setting up of multiple instances. Better exception handling when instances cannot be launched, and spot instances with defined duration when avaialble.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.add_volumes">
<code class="sig-name descname">add_volumes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.add_volumes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.add_volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>adds volumes to the data you will process.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.compute_volumesize">
<code class="sig-name descname">compute_volumesize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.compute_volumesize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.compute_volumesize" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the current ami volume size and adds in the size of the data that will be analyzed.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.get_costmonitoring">
<code class="sig-name descname">get_costmonitoring</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.get_costmonitoring"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.get_costmonitoring" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cost incurred by a given group so far by looking at the logs bucket of the appropriate s3 folder.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.log_jobs">
<code class="sig-name descname">log_jobs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.log_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.log_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Once instances are acquired, create logs that can be filled in as they run.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.parse_config">
<code class="sig-name descname">parse_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.parse_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.parse_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the config file given for specific neurocaas parameters. In particular, the <em>duration</em> of the job, and the <em>dataset size</em> 
TODO: check for type in these configuration files.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.process_inputs">
<code class="sig-name descname">process_inputs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.process_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.process_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiates Processing On Previously Acquired EC2 Instance. This version requires that you include a config (fourth) argument</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.put_instance_monitor_rule">
<code class="sig-name descname">put_instance_monitor_rule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.put_instance_monitor_rule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.put_instance_monitor_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>For multiple datasets.</p>
</dd></dl>

<dl class="py method">
<dt id="ncap_iac.protocols.submit_start.Submission_dev.start_instance">
<code class="sig-name descname">start_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#Submission_dev.start_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.Submission_dev.start_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts new instances if stopped. We write a special loop for this one because we only need a single 60 second pause for all the intances, not one for each in serial. Specialized certificate messages.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="ncap_iac.protocols.submit_start.handler_deploy">
<code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">handler_deploy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">context</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#handler_deploy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.handler_deploy" title="Permalink to this definition">¶</a></dt>
<dd><p>E</p>
</dd></dl>

<dl class="py function">
<dt id="ncap_iac.protocols.submit_start.handler_develop">
<code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">handler_develop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">context</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#handler_develop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.handler_develop" title="Permalink to this definition">¶</a></dt>
<dd><p>Newest version of handler that logs outputs to a subfolder of the result folder that is indexed by the job submission date and the submit name.</p>
</dd></dl>

<dl class="py function">
<dt id="ncap_iac.protocols.submit_start.handler_log_dev">
<code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">handler_log_dev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">context</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#handler_log_dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.handler_log_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Newest version of handler that logs outputs to a subfolder of the result folder that is indexed by the job submission date and the submit name.</p>
</dd></dl>

<dl class="py function">
<dt id="ncap_iac.protocols.submit_start.process_upload_deploy">
<code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">process_upload_deploy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#process_upload_deploy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.process_upload_deploy" title="Permalink to this definition">¶</a></dt>
<dd><p>Updated version that can handle config files. 
Inputs:
key: absolute path to created object within bucket.
bucket: name of the bucket within which the upload occurred.
time: the time at which the upload event happened.</p>
</dd></dl>

<dl class="py function">
<dt id="ncap_iac.protocols.submit_start.process_upload_dev">
<code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">process_upload_dev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#process_upload_dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.process_upload_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Updated version that can handle config files. 
Inputs:
key: absolute path to created object within bucket.
bucket: name of the bucket within which the upload occurred.
time: the time at which the upload event happened.</p>
</dd></dl>

<dl class="py function">
<dt id="ncap_iac.protocols.submit_start.process_upload_log_dev">
<code class="sig-prename descclassname">ncap_iac.protocols.submit_start.</code><code class="sig-name descname">process_upload_log_dev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bucket_name</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncap_iac/protocols/submit_start.html#process_upload_log_dev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncap_iac.protocols.submit_start.process_upload_log_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Updated version that can handle config files. 
Inputs:
key: absolute path to created object within bucket.
bucket: name of the bucket within which the upload occurred.
time: the time at which the upload event happened.</p>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">NeuroCAAS</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../develop/installation.html">Installing NeuroCAAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/quickstart.html">Getting Started with NeuroCAAS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="userprofiles.html">User Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="devtools.html">Developer Tools</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="blueprints.html" title="previous chapter">&lt;no title&gt;</a></li>
      <li>Next: <a href="userprofiles.html" title="next chapter">User Profiles</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Taiga Abe.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/reference/protocols.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>